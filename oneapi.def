Bootstrap: docker
From: ubuntu:20.04


%labels
Author Charles Peterson <charles.c.peterson3@gmail.com>


%post

export DEBIAN_FRONTEND=noninteractive
export APT_KEY_DONT_WARN_ON_DANGEROUS_USAGE=1
export SINGULARITY_SHELL=/bin/bash
export SHELL=/bin/bash
apt-get update && apt-get -y upgrade
apt-get install -y  gfortran    make ssh patch curl subversion wget unzip perl git file gnupg2 software-properties-common linux-headers-generic

## Install ONEAPI
wget https://apt.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB -O - | apt-key add -
add-apt-repository "deb https://apt.repos.intel.com/oneapi all main"
apt update
apt install intel-basekit intel-hpckit intel-aikit -y


%environment

bash -c "source /opt/intel/oneapi/setvars.sh"

%runscript
exec /bin/bash "$@"

